# Code and data availability

All code and certain de-identified datasets are currently available at (removed for blinded review). The outline below walks through the code used to analyze data and generate visualizations and model output.

Below is a table of code descriptions including the input and output from the code.


| Steps | Scripts                      | Description                                                                                                                                        | Input                                                                                                                                  | Output                                                                                                                                                                                                       |
|-------|------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 1     | FIN-count-cases-with-mbsf.py | Merge MedPAR and MBSF data, filter to those with Parts A and B coverage, and count the number of cases per outcome group per zip code per year.    | **Outcomes to study and corresponding ICD-9 and ICD-10 codes**                                                                         | **Two CSV files per year: one counting cases using 2 diagnosis columns only, one using all 25 diagnosis columns. CSVs contain columns for the outcome (e.g. "AMI"), the ZIP code, and the number of cases.** |
|       |                              |                                                                                                                                                    | FIN-outcomes-groups.csv                                                                                                                | FIN-icd-counts-per-zipcode-with-mbsf-{year}-using-{num}-dgns-columns.csv                                                                                                                                     |
|       |                              |                                                                                                                                                    | FIN-outcome-group-ICD10s.csv                                                                                                           |                                                                                                                                                                                                              |
|       |                              |                                                                                                                                                    | FIN-outcome-group-ICD10s-exclusion.csv                                                                                                 |                                                                                                                                                                                                              |
|       |                              |                                                                                                                                                    | **List of included ZIP codes in Pennsylvania & New York study regions**                                                                |                                                                                                                                                                                                              |
|       |                              |                                                                                                                                                    | included-zipcodes-list.csv                                                                                                             |                                                                                                                                                                                                              |
|       |                              |                                                                                                                                                    | **MedPAR files (inpatient claims), one CSV file per year, each CSV contains all records from entire PA & NY states in one year**       |                                                                                                                                                                                                              |
|       |                              |                                                                                                                                                    | THES-DID-INP-REF-whole-state-filtered-medpar-{year}.csv                                                                                |                                                                                                                                                                                                              |
|       |                              |                                                                                                                                                    | **MBSF files (all Medicare beneficiaries), one CSV per year, each CSV filtered to all beneficiaries from just the ZIP codes of study** |                                                                                                                                                                                                              |
|       |                              |                                                                                                                                                    | THES-DID-INP-REF-ZIP-mbsf-zipcode-subset-{year}.csv                                                                                    |                                                                                                                                                                                                              |
| 2     | FIN-join-zipcodes-mbsf.py    | Aggregate MBSF subset data into zip code-level bins, recording total populations and some average statistics, and merge with aggregated ICD codes. | **Counted cases per ZIP code, per year, per # of diagnosis columns (Output from (1))**                                                 | **Aggregate statistics per ZIP code of beneficiary demographics (age distributions, sex, race, duals, etc.) from MBSF file, for each year**                                                                  |
|       |                              |                                                                                                                                                    | PUB-ZIP-icd-counts-per-zipcode-with-mbsf-{year}-using-2-dgns-columns.csv                                                               | FIN-mbsf-agg-statistics-{year}.csv                                                                                                                                                                           |
|       |                              |                                                                                                                                                    | **MBSF files (all Medicare beneficiaries), one CSV per year, each CSV filtered to all beneficiaries from just the ZIP codes of study** | Merged CSV file for each year, each number of diagnosis columns, with hospitalization counts AND MBSF aggregate statistics (i.e. denominators) together                                                      |
|       |                              |                                                                                                                                                    | THES-DID-INP-REF-ZIP-mbsf-zipcode-subset-{year}.csv                                                                                    | FIN-icd-rates-per-zipcode-{year}-using-{num}-dgns-columns.csv                                                                                                                                                |
|       |                              |                                                                                                                                                    | **List of included ZIP codes in Pennsylvania & New York study regions**                                                                |                                                                                                                                                                                                              |
|       |                              |                                                                                                                                                    | included-zipcodes-list.csv                                                                                                             |                                                                                                                                                                                                              |
| 3     | FIN-plot-raw-rates.R         | Plot time series of raw incidence rates, aggregated over study regions (NY Mid, NY Border, PA Border).                                             | **Hospitalization counts and aggregate statistics (Output from (2))**                                                                  | **"Master dataframe" containing all ZIP code data (hospitalization counts per outcome per year, etc) in one table**                                                                                          |
|       |                              |                                                                                                                                                    | FIN-icd-rates-per-zipcode-{year}-using-{num}-dgns-columns.csv                                                                          | MASTER-DF.csv (this was changed to MASTER-DF-UPDATE.csv after adding the last three month of data in 2015)                                                                                                   |
|       |                              |                                                                                                                                                    | **List of included ZIP codes in Pennsylvania & New York study regions**                                                                | **Data frame of demographic trends (age, race, sex, total benes) over time**                                                                                                                                 |
|       |                              |                                                                                                                                                    | included-zipcodes-list.csv                                                                                                             | DEMOGRAPHICS-DF.csv                                                                                                                                                                                          |
|       |                              |                                                                                                                                                    | **UNGD spuds aggregated over ZIP codes**                                                                                               | **Final, publishable plot with time-series of hospitalization rates stacked on top of UNGD development over time**                                                                                           |
|       |                              |                                                                                                                                                    | THES-DID-INP-REF-ZIP-zipcode-aggregated-spuds.csv                                                                                      | publishable_plot_column.eps                                                                                                                                                                                  |
|       |                              |                                                                                                                                                    | **Outcomes to study and corresponding ICD-9 codes**                                                                                    |                                                                                                                                                                                                              |
|       |                              |                                                                                                                                                    | FIN-outcomes-groups.csv                                                                                                                |                                                                                                                                                                                                              |
| 4     | CALLAWAY_DID.R               | Run difference-in-difference anlaysis on our panel dataset usind the did package developed by Callaway et al.                                      | **UNGD spuds aggregated over ZIP codes**                                                                                               | **Spreadsheet with one row of model output for each model specification (outcome, # diagnosis cols used, which control region) and plots for pre-trend analysis**                                            |
|       |                              |                                                                                                                                                    | THES-DID-INP-REF-ZIP-zipcode-aggregated-spuds.csv                                                                                      | CALLAWAY_FINAL_DID_RESULTS_0810ONLY.csv                                                                                                                                                                      |
|       |                              |                                                                                                                                                    | **Cleaned MedPAR/MBSF data with health outcomes (Output from (3))**                                                                    | CALLAWAY_FINAL_DID_RESULTS_0810ONLY_preperiod2009_BOOTSTRAPPED.csv                                                                                                                                           |
|       |                              |                                                                                                                                                    | MASTER-DF-UPDATE.csv                                                                                                                   | CALLAWAY_FINAL_DID_RESULTS_0810ONLY_preperiodVARYING.csv                                                                                                                                                     |
|       |                              |                                                                                                                                                    | **Outcomes to study and corresponding ICD-9 codes**                                                                                    | pretrend_NYMid_basedperiod2009.eps                                                                                                                                                                           |
|       |                              |                                                                                                                                                    | FIN-outcomes-groups.csv                                                                                                                | pretrend_NYMid_basedperiodVARYING.eps                                                                                                                                                                        |
